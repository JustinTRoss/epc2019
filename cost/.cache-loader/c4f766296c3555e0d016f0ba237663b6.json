{"remainingRequest":"/Users/maxp8108/esridev/epc2019/cost/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/maxp8108/esridev/epc2019/cost/src/components/App.js","dependencies":[{"path":"/Users/maxp8108/esridev/epc2019/cost/src/components/App.js","mtime":1551415664327},{"path":"/Users/maxp8108/esridev/epc2019/cost/.babelrc","mtime":1551564672042},{"path":"/Users/maxp8108/esridev/epc2019/cost/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maxp8108/esridev/epc2019/cost/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["define([\"exports\", \"react\", \"esri/Map\", \"./MapComponent\", \"./Loader\", \"./QuestionHeader\", \"calcite-react/Elements\", \"esri/layers/FeatureLayer\", \"styled-components\", \"./ListView\", \"esri/core/watchUtils\", \"../css/question.css\"], function (exports, _react, _Map, _MapComponent, _Loader, _QuestionHeader, _Elements, _FeatureLayer, _styledComponents, _ListView, _watchUtils) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _Map2 = _interopRequireDefault(_Map);\n\n  var _MapComponent2 = _interopRequireDefault(_MapComponent);\n\n  var _Loader2 = _interopRequireDefault(_Loader);\n\n  var _QuestionHeader2 = _interopRequireDefault(_QuestionHeader);\n\n  var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);\n\n  var _styledComponents2 = _interopRequireDefault(_styledComponents);\n\n  var _ListView2 = _interopRequireDefault(_ListView);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _templateObject4() {\n    var data = _taggedTemplateLiteral([\"\\n  margin: 0.5rem 0.5rem 0rem 0.5rem\\n  color: #616161;\\n\"]);\n\n    _templateObject4 = function _templateObject4() {\n      return data;\n    };\n\n    return data;\n  }\n\n  function _templateObject3() {\n    var data = _taggedTemplateLiteral([\"\\n  margin: 0.5rem 0.5rem 0rem 0.5rem\\n\"]);\n\n    _templateObject3 = function _templateObject3() {\n      return data;\n    };\n\n    return data;\n  }\n\n  function _templateObject2() {\n    var data = _taggedTemplateLiteral([\"\\n  font-size: 2.40307rem;\\n  line-height: 3.1rem;\\n  margin: 0.5rem 0.5rem 0rem 0.5rem;\\n  font-weight: bold;\\n\"]);\n\n    _templateObject2 = function _templateObject2() {\n      return data;\n    };\n\n    return data;\n  }\n\n  function _templateObject() {\n    var data = _taggedTemplateLiteral([\"\\n  font-size: 1.9994rem;\\n  line-height: 2.325rem;\\n  margin: 0.5rem 0.5rem 0rem 0.5rem;\\n  font-weight: bold;\\n  color: #616161;\\n\"]);\n\n    _templateObject = function _templateObject() {\n      return data;\n    };\n\n    return data;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(Object.defineProperties(strings, {\n      raw: {\n        value: Object.freeze(raw)\n      }\n    }));\n  }\n\n  var SmH1 = (0, _styledComponents2.default)(_Elements.CalciteH1)(_templateObject());\n  var BigH1 = (0, _styledComponents2.default)(_Elements.CalciteH1)(_templateObject2());\n  var Comph4 = (0, _styledComponents2.default)(_Elements.CalciteH6)(_templateObject3());\n  var SmH4 = (0, _styledComponents2.default)(_Elements.CalciteH6)(_templateObject4());\n  var views = [{\n    'title': 'Search for an area',\n    'cost': '$0',\n    'sub': 'Unstored geocode - 1M transactions'\n  }, {\n    'title': 'Host retail locations',\n    'cost': '$0.004',\n    'sub': \"1 GB of hosted features - $24/mo\",\n    'unit': '/mo'\n  }, {\n    'title': 'Create a route',\n    'cost': '$0.0005',\n    'sub': 'Routing service - 0.005 credits'\n  }, {\n    'title': 'Scale to 10,000 visitors',\n    'cost': '$5.00',\n    'sub': 'One route per visitor',\n    'unit': '/mo'\n  }, {\n    'title': 'Generate revenue',\n    'cost': '$125',\n    'sub': 'Unlimited apps',\n    'unit': '/mo',\n    'shrink': true\n  }];\n\n  var App = function (_Component) {\n    _inherits(App, _Component);\n\n    _createClass(App, [{\n      key: \"_initMap\",\n      value: function _initMap() {\n        this.map = new _Map2.default({\n          basemap: 'dark-gray-vector'\n        });\n      }\n    }]);\n\n    function App(props) {\n      var _this;\n\n      _classCallCheck(this, App);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n      _this._initMap();\n\n      _this.onViewLoad = _this.onViewLoad.bind(_assertThisInitialized(_this));\n      _this.onListItemClick = _this.onListItemClick.bind(_assertThisInitialized(_this));\n      _this.onSelectSearch = _this.onSelectSearch.bind(_assertThisInitialized(_this));\n      _this.onGetRoute = _this.onGetRoute.bind(_assertThisInitialized(_this));\n      _this.onLoadStores = _this.onLoadStores.bind(_assertThisInitialized(_this));\n      _this.onListHover = _this.onListHover.bind(_assertThisInitialized(_this));\n      _this.onListUnhover = _this.onListUnhover.bind(_assertThisInitialized(_this));\n      _this.onListClick = _this.onListClick.bind(_assertThisInitialized(_this));\n      _this.state = {\n        loaded: false,\n        active: [false, false, false, false, false],\n        features: null\n      };\n      return _this;\n    }\n\n    _createClass(App, [{\n      key: \"onViewLoad\",\n      value: function onViewLoad(view) {\n        this.mapView = view;\n        this.setState({\n          loaded: true\n        });\n      }\n    }, {\n      key: \"onListItemClick\",\n      value: function onListItemClick(qKey) {\n        var _this2 = this;\n\n        var next = views.map(function (v, i) {\n          return i === qKey ? !_this2.state.active[i] : _this2.state.active[i];\n        });\n        this.setState({\n          active: next\n        });\n      }\n    }, {\n      key: \"onListHover\",\n      value: function onListHover(id) {\n        if (this.highlight) this.highlight.remove();\n        if (!this.lyrView) return;\n        if (!id) return;\n        this.highlight = this.lyrView.highlight(id);\n      }\n    }, {\n      key: \"onListUnhover\",\n      value: function onListUnhover(id) {\n        if (this.highlight) this.highlight.remove();\n      }\n    }, {\n      key: \"onListClick\",\n      value: function onListClick(id) {\n        var _this3 = this;\n\n        console.log(\"HERE\");\n        this.lyrView.queryFeatures({\n          where: \"OBJECTID = \".concat(id),\n          returnGeometry: true\n        }).then(function (res) {\n          if (!res || !res.features.length) return;\n\n          _this3.mapView.popup.open({\n            features: res.features,\n            location: res.features[0].geometry\n          });\n        }).catch(function (er) {\n          return console.log(er);\n        });\n      }\n    }, {\n      key: \"onSelectSearch\",\n      value: function onSelectSearch(evt) {\n        this.onListItemClick(0);\n      }\n    }, {\n      key: \"onGetRoute\",\n      value: function onGetRoute(evt) {\n        // console.log('here')\n        this.onListItemClick(2);\n      }\n    }, {\n      key: \"onLoadStores\",\n      value: function onLoadStores(evt) {\n        var _this4 = this;\n\n        this.onListItemClick(1);\n        this.lyr = new _FeatureLayer2.default({\n          url: \"https://services.arcgis.com/q7zPNeKmTWeh7Aor/arcgis/rest/services/a07272/FeatureServer\",\n          outFields: [\"location_name\", \"city\", \"OBJECTID\"],\n          definitionExpression: \"time = 4\",\n          renderer: {\n            type: \"simple\",\n            symbol: {\n              type: \"text\",\n              color: [0, 255, 255],\n              text: \"\\uE61D\",\n              font: {\n                size: 20,\n                family: 'calcite-web-icons'\n              }\n            }\n          },\n          popupTemplate: {\n            title: '{location_name}',\n            content: '{street_address}'\n          }\n        });\n        this.map.add(this.lyr);\n        this.mapView.whenLayerView(this.lyr).then(function (lV) {\n          _this4.lyrView = lV;\n          return (0, _watchUtils.whenFalseOnce)(_this4.lyrView, 'updating');\n        }).then(function (_) {\n          return _this4.lyrView.queryFeatures({\n            where: \"1=1\"\n          });\n        }).then(function (res) {\n          if (res && res.features && res.features.length) {\n            _this4.setState({\n              features: res.features\n            });\n          }\n        }).catch(function (er) {\n          return console.log(er);\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this5 = this;\n\n        if (!this.state.loaded) {\n          return _react2.default.createElement(_react2.default.Fragment, null, _react2.default.createElement(_MapComponent2.default, {\n            map: this.map,\n            onLoad: this.onViewLoad,\n            active: this.state.active\n          }), _react2.default.createElement(_Loader2.default, null));\n        }\n\n        var questionComponents = views.map(function (v, i) {\n          var key = v.title;\n          var isActive = _this5.state.active[i];\n\n          var liContent = _react2.default.createElement(_QuestionHeader2.default, {\n            key: key,\n            title: v.title,\n            onClick: function onClick(_) {\n              return _this5.onListItemClick(i);\n            },\n            active: isActive,\n            index: i\n          });\n\n          if (!isActive) return liContent;\n          var header = v.shrink ? _react2.default.createElement(SmH1, null, v.cost, _react2.default.createElement(\"span\", {\n            className: \"min-text\"\n          }, v.unit)) : _react2.default.createElement(BigH1, null, v.cost, _react2.default.createElement(\"span\", {\n            className: \"min-text\"\n          }, v.unit));\n          var sub = v.shrink ? _react2.default.createElement(SmH4, null, v.sub) : _react2.default.createElement(Comph4, null, v.sub);\n          return _react2.default.createElement(\"div\", {\n            key: key,\n            className: \"question-content\"\n          }, liContent, _react2.default.createElement(\"div\", {\n            style: {\n              height: \"5rem\",\n              textAlign: \"center\"\n            }\n          }, header, sub));\n        });\n        return _react2.default.createElement(_react2.default.Fragment, null, _react2.default.createElement(\"div\", {\n          style: {\n            width: \"75%\",\n            height: \"100%\"\n          }\n        }, _react2.default.createElement(_MapComponent2.default, {\n          map: this.map,\n          onLoad: this.onViewLoad,\n          active: this.state.active,\n          onSelectSearch: this.onSelectSearch,\n          onGetRoute: this.onGetRoute\n        })), _react2.default.createElement(\"div\", {\n          style: {\n            width: \"25%\",\n            background: \"rgba(0, 171, 189, 0.6)\",\n            overflowY: 'scroll'\n          }\n        }, questionComponents), _react2.default.createElement(\"div\", {\n          style: {\n            position: \"absolute\",\n            top: \"5rem\",\n            left: \"1rem\",\n            width: \"20%\",\n            height: 'calc(100vh - 10rem)'\n          }\n        }, _react2.default.createElement(_ListView2.default, {\n          onLoadStores: this.onLoadStores,\n          data: this.state.features,\n          onHover: this.onListHover,\n          onUnhover: this.onListUnhover,\n          onClick: this.onListClick\n        })));\n      }\n    }]);\n\n    return App;\n  }(_react.Component);\n\n  exports.default = App;\n});",null]}